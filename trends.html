<!DOCTYPE html>
<html>
<head>
    <title>Trends</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
<header>
    <img src="logo.png" class="logo">
    <h2>Vital Trends</h2>
</header>

<nav class="nav">
    <a href="dashboard.html">Home</a>
    <a href="alerts.html">Alerts</a>
    <a href="trends.html" class="active">Trends</a>
    <a href="log-symptom.html">Log Symptoms</a>
    <a href="profile.html">Profile</a>
    <a onclick="logout()">Logout</a>
</nav>

<section class="card">
    <canvas id="bp"></canvas>
    <canvas id="hr"></canvas>
    <canvas id="glucose"></canvas>
</section>

<script src="ui.js"></script>
<script src="auth.js"></script>
<script src="api.js"></script>
<script src="charts.js"></script>

<script>
(async () => {
    const user = JSON.parse(localStorage.getItem("activeUser"));
    const vitals = await getVitals(user.id);

    const labels = vitals.map(v => v.date);

    createLineChart("bp", labels, vitals.map(v => v.bp_systolic), "Systolic BP");
    createLineChart("hr", labels, vitals.map(v => v.hr), "Heart Rate");
    createLineChart("glucose", labels, vitals.map(v => v.glucose), "Glucose");
})();
</script>

</body>
</html>
